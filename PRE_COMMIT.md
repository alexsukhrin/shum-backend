# Pre-commit Setup and Usage

## üìã Pre-commit —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω!

Pre-commit –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–¥ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫–æ–º–º–∏—Ç–æ–º.

## üõ†Ô∏è –ß—Ç–æ –¥–µ–ª–∞–µ—Ç pre-commit:

### **1. –ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- –£–¥–∞–ª—è–µ—Ç trailing whitespace
- –î–æ–±–∞–≤–ª—è–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç JSON, YAML, TOML —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
- –ù–∞—Ö–æ–¥–∏—Ç debug statements
- –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏

### **2. Python –∫–æ–¥:**
- **Django-upgrade** - –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–¥ –ø–æ–¥ Django 5.0
- **Ruff** - –ª–∏–Ω—Ç–µ—Ä –∏ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä (–∑–∞–º–µ–Ω—è–µ—Ç flake8 + black)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç–∏–ª—å –∫–æ–¥–∞

### **3. Django —à–∞–±–ª–æ–Ω—ã:**
- **djLint** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç HTML —à–∞–±–ª–æ–Ω—ã
- –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—Å—Ç—É–ø—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∫–æ–º–º–∏—Ç–µ:**
```bash
git add .
git commit -m "Your message"
# Pre-commit –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
```

### **–ó–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É—é:**
```bash
# –ù–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö
pre-commit run --all-files

# –¢–æ–ª—å–∫–æ –Ω–∞ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
pre-commit run

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π hook
pre-commit run ruff-check
```

### **–í Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:**
```bash
# –ó–∞–ø—É—Å–∫ –≤ Django –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker-compose -f docker-compose.local.yml exec django pre-commit run --all-files
```

## ‚ö†Ô∏è –ï—Å–ª–∏ pre-commit "–ø–∞–¥–∞–µ—Ç":

### **1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
–ï—Å–ª–∏ pre-commit –∏—Å–ø—Ä–∞–≤–∏–ª —Ñ–∞–π–ª—ã:
```bash
git add .
git commit -m "Your message"  # –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞
```

### **2. –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å pre-commit (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```bash
git commit -m "Your message" --no-verify
```

### **3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é:**
–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –æ—à–∏–±–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤—å—Ç–µ –∏—Ö —Å–æ–≥–ª–∞—Å–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏—è–º.

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:

### **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ:**
```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pre-commit
pip install pre-commit

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å hooks
pre-commit install

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)
pre-commit run --all-files
```

### **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ hooks:**
```bash
pre-commit autoupdate
```

## üìÅ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–∞–π–ª–µ `.pre-commit-config.yaml`:
- **exclude**: –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º docs/, migrations/, devcontainer.json
- **Python 3.12** –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **Django 5.0** —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

## ‚úÖ –í CI/CD:

GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç pre-commit:
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º Pull Request
- –ü—Ä–∏ push –≤ main/master
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–ù–µ –æ—Ç–∫–ª—é—á–∞–π—Ç–µ pre-commit** - –æ–Ω –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ
2. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ** hooks –∫–æ–º–∞–Ω–¥–æ–π `pre-commit autoupdate`
3. **–ò—Å–ø—Ä–∞–≤–ª—è–π—Ç–µ –æ—à–∏–±–∫–∏** –≤–º–µ—Å—Ç–æ –∏—Ö –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
4. **–ö–æ–º–º–∏—Ç—å—Ç–µ —á–∞—â–µ** - —Ç–∞–∫ –ø—Ä–æ—â–µ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –æ—à–∏–±–∫–∏

## üö´ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:

### **–ï—Å–ª–∏ –∑–∞–≤–∏—Å–ª–æ:**
```bash
pre-commit clean
pre-commit install --install-hooks
```

### **–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```bash
pre-commit autoupdate
pre-commit run --all-files
```

**Pre-commit –ø–æ–º–æ–∂–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–æ–¥ –≤ –æ—Ç–ª–∏—á–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏! üéâ**
