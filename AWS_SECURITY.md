# üîí AWS Security Guidelines

## ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å AWS –∫–ª—é—á–µ–π**

### **‚ùå –ù–ò–ö–û–ì–î–ê –ù–ï –î–ï–õ–ê–ô–¢–ï:**

1. **–ù–µ –∫–æ–º–º–∏—Ç–∏—Ç–µ AWS –∫–ª—é—á–∏ –≤ Git:**
   ```bash
   # ‚ùå –ü–õ–û–•–û - –ª—é–±—ã–µ –∫–ª—é—á–∏ –≤ –∫–æ–¥–µ
   AWS_ACCESS_KEY = ""
   AWS_SECRET_KEY = ""
   ```

2. **–ù–µ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö:**
   - README.md
   - config —Ñ–∞–π–ª—ã –≤ Git
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

3. **–ù–µ —à–∞—Ä—å—Ç–µ –≤ —á–∞—Ç–∞—Ö/—Å–ª–∞–∫–µ:**
   - –°–∫—Ä–∏–Ω—à–æ—Ç—ã —Å –∫–ª—é—á–∞–º–∏
   - –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ .env —Ñ–∞–π–ª–æ–≤
   - –õ–æ–≥–∏ —Å credentials

### **‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û–ï –•–†–ê–ù–ï–ù–ò–ï:**

#### **1. –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:**
```env
# .envs/.local/.django (–ù–ï –≤ Git!)
DJANGO_AWS_ACCESS_KEY_ID=
DJANGO_AWS_SECRET_ACCESS_KEY=
DJANGO_AWS_STORAGE_BUCKET_NAME=
```

#### **2. Production (GitLab CI/CD):**
```bash
# GitLab ‚Üí Settings ‚Üí CI/CD ‚Üí Variables
DJANGO_AWS_ACCESS_KEY_ID = "secret, masked"
DJANGO_AWS_SECRET_ACCESS_KEY = "secret, masked"
DJANGO_AWS_STORAGE_BUCKET_NAME = "variable"
```

#### **3. Production (GitHub Actions):**
```bash
# GitHub ‚Üí Settings ‚Üí Secrets and variables
DJANGO_AWS_ACCESS_KEY_ID = "secret"
DJANGO_AWS_SECRET_ACCESS_KEY = "secret"
```

#### **4. Production Server:**
```bash
# Environment variables
export DJANGO_AWS_ACCESS_KEY_ID=""
export DJANGO_AWS_SECRET_ACCESS_KEY=""

# Or use AWS IAM Role (–ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç)
```

### **üõ°Ô∏è BEST PRACTICES:**

#### **1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ IAM Roles (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```bash
# –ù–∞ EC2 instance –Ω–∞–∑–Ω–∞—á—å—Ç–µ IAM Role –≤–º–µ—Å—Ç–æ –∫–ª—é—á–µ–π
# –¢–æ–≥–¥–∞ AWS SDK –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∏—Ç credentials
```

#### **2. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞:**
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "s3:PutObject",
        "s3:GetObject",
        "s3:DeleteObject"
      ],
      "Resource": "arn:aws:s3:::your-bucket/media/*"
    }
  ]
}
```

#### **3. –†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π:**
- –ú–µ–Ω—è–π—Ç–µ –∫–ª—é—á–∏ –∫–∞–∂–¥—ã–µ 90 –¥–Ω–µ–π
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- –£–¥–∞–ª—è–π—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–ª—é—á–∏

#### **4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- –í–∫–ª—é—á–∏—Ç–µ CloudTrail –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ Access Logs —Ä–µ–≥—É–ª—è—Ä–Ω–æ

### **üö® –ß–¢–û –î–ï–õ–ê–¢–¨ –ï–°–õ–ò –ö–õ–Æ–ß–ò –°–ö–û–ú–ü–†–û–ú–ï–¢–ò–†–û–í–ê–ù–´:**

#### **1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:**
```bash
# 1. –î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏ –≤ AWS Console
# 2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–µ –∫–ª—é—á–∏
# 3. –û–±–Ω–æ–≤–∏—Ç–µ –≤–æ –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º–∞—Ö
```

#### **2. –û—á–∏—Å—Ç–∏—Ç–µ Git –∏—Å—Ç–æ—Ä–∏—é:**
```bash
# –£–¥–∞–ª–∏—Ç–µ –∫–ª—é—á–∏ –∏–∑ –≤—Å–µ—Ö –∫–æ–º–º–∏—Ç–æ–≤ (–û–ü–ê–°–ù–û!)
git filter-branch --force --index-filter \
  'git rm --cached --ignore-unmatch path/to/file/with/keys' \
  --prune-empty --tag-name-filter cat -- --all
```

#### **3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
- AWS CloudTrail
- Billing dashboard
- –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

### **üìã CHECKLIST –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò:**

- [ ] ‚úÖ AWS –∫–ª—é—á–∏ –ù–ï –≤ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- [ ] ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è environment variables
- [ ] ‚úÖ –ö–ª—é—á–∏ –≤ CI/CD –∫–∞–∫ secrets
- [ ] ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ IAM –ø—Ä–∞–≤–∞
- [ ] ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π
- [ ] ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–∫–ª—é—á–µ–Ω
- [ ] ‚úÖ .env —Ñ–∞–π–ª—ã –≤ .gitignore

### **üîç –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨:**

```bash
# –ü–æ–∏—Å–∫ –∫–ª—é—á–µ–π –≤ Git –∏—Å—Ç–æ—Ä–∏–∏
git log --all -S"AKIA" --source --all
git log --all -S"AWS_ACCESS_KEY" --source --all

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö —Ñ–∞–π–ª–æ–≤
grep -r "AKIA" .
grep -r "AWS_ACCESS_KEY" .
```

**üéØ –ü–û–ú–ù–ò–¢–ï: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å AWS –∫–ª—é—á–µ–π - —ç—Ç–æ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞!**
